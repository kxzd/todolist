(()=>{"use strict";const t=class{constructor(t,e,s){this.id=t,this.name=e,this.complete=s}getId(){return this.id}getComplete(){return this.complete}getName(){return this.name}setId(t){this.id=t}setComplete(t){this.complete=t}setName(t){this.name=t}},e=class{constructor(t,e){this.id=t,this.name=e,this.tasks=[]}getTasks(){return this.tasks}getName(){return this.name}getID(){return this.id}setID(t){this.id=t}setTasks(t){this.tasks=t}setSpecificTask(t,e){this.task[t]=e}getSpecificTask(t){return this.task[t]}setName(t){this.name=t}addTask(e){this.tasks.push(new t(this.randomID,e,!1))}},s=class{constructor(){this.projects=[],this.projects.push(new e(this.randomID(),"General")),this.projects[0].tasks.push(new t(this.randomID(),"Wash dishes",!0)),this.projects[0].tasks.push(new t(this.randomID(),"Fix bathroom lightbulb",!1)),this.projects.push(new e(this.randomID(),"Work")),this.projects[1].tasks.push(new t(this.randomID(),"Meeting with John at 9:30am",!1))}getProjects(){return this.projects}setProjects(t){this.projects=t}getSpecificProject(t){return this.projects[t]}setSpecificProject(t,e){this.projects[e]=t}addProject(t,s){this.projects.push(new e(t,s))}addTaskToProject(e,s){this.projects[e].tasks.push(new t(this.randomID(),s,!1))}randomID(){return Math.floor(1e4*Math.random())}},r=document.querySelector(".projects-list"),o=document.querySelector("[data-new-project-form]"),a=document.querySelector("[data-new-project-input]"),n=document.querySelector("[data-tasks]"),c=document.querySelector(".task-list-title"),i=document.querySelector(".task-list-counter"),d=document.querySelector(".tasks"),l=document.querySelector(".task-list"),u=document.getElementById("task-template"),p=document.querySelector("[data-new-task-form]"),h=document.querySelector("[data-new-task-input]"),m=Object.assign(new s,JSON.parse(localStorage.getItem("project.list")))||new s;let j=localStorage.getItem("project-selected");function k(t){localStorage.setItem("project.list",JSON.stringify(t))}function g(){S(r),m.projects.forEach((t=>{const e=document.createElement("li");e.dataset.projectId=t.id,e.classList.add("project-name"),e.innerHTML=t.name;const s=document.createElement("button");s.classList.add("project-delete"),s.innerHTML="X",e.appendChild(s),t.id==j&&e.classList.add("active-project-item"),r.appendChild(e)}));const t=m.projects.find((t=>t.id==j));null==j?l.style.display="none":(l.style.display="",c.innerHTML=t.name,f(t),S(d),function(t){t.tasks.forEach((t=>{const e=document.importNode(u.content,!0),s=e.querySelector("input");s.id=t.id,s.checked=t.complete;const r=e.querySelector("label");r.htmlFor=t.id,r.append(t.name),e.querySelector("button").classList.add("task-delete"),n.appendChild(e)}))}(t)),document.querySelectorAll(".project-delete").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.parentNode.dataset.projectId;for(let t=0;t<m.projects.length;t++)e==m.projects[t].id&&m.projects.splice(t,1);j=null,k(m),g()}))})),document.querySelectorAll(".task-delete").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.parentNode.firstElementChild.id,s=m.projects.find((t=>t.id==j));for(let t=0;t<s.tasks.length;t++)console.log(s.tasks[t].id),e==s.tasks[t].id&&s.tasks.splice(t,1);k(m),g()}))}))}function f(t){const e=t.tasks.filter((t=>!t.complete)).length,s=1===e?"task":"tasks";i.innerHTML=`${e} ${s} remaining`}function S(t){for(;t.firstChild;)t.removeChild(t.firstChild)}r.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(j=t.target.dataset.projectId,k(m),g())})),n.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=m.projects.find((t=>t.id==j)),s=e.tasks.find((e=>e.id==t.target.id));s.complete=t.target.checked,console.log(s),k(m),f(e)}})),o.addEventListener("submit",(t=>{t.preventDefault();const e=a.value;null!=e&&""!==e&&(m.addProject(m.randomID(),e),a.value="",k(m),g())})),p.addEventListener("submit",(t=>{t.preventDefault();const e=h.value;if(null!=e&&""!==e){for(let t=0;t<m.projects.length;t++)j==m.projects[t].id&&m.addTaskToProject(t,e);h.value="",k(m),g()}})),g()})();